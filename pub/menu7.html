<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/JuDocPlottest/libs/katex/katex.min.css"> <script src="/JuDocPlottest/libs/plotlyjs/plotly-latest.min.js"></script> <link rel=stylesheet  href="/JuDocPlottest/css/judoc.css"> <link rel=stylesheet  href="/JuDocPlottest/css/basic.css"> <link rel=icon  href="/JuDocPlottest/assets/infra/favicon.png"> <title>Working with PlotyJS</title> <header> <div class=blog-name ><a href="">Basic Template</a></div> <nav> <ul> <li><a href="/JuDocPlottest/">Discourse thread</a> <li><a href="/JuDocPlottest/pub/menu2.html">pure JuDoc</a> <li><a href="/JuDocPlottest/pub/menu3.html">Literate</a> <li><a href="/JuDocPlottest/pub/menu4.html">Weave</a> <li><a href="/JuDocPlottest/pub/menu5.html">Weave2</a> <li><a href="/JuDocPlottest/pub/menu6.html">Weave3</a> <li><a href="/JuDocPlottest/pub/menu7.html">PlotlyJS</a> <li><a href="/JuDocPlottest/pub/menu8.html">Issue325</a> <li><a href="/JuDocPlottest/pub/menu9.html">Issue334</a> </ul> <img src="/JuDocPlottest/assets/infra/hamburger.svg" id=menu-icon > </nav> </header> <div class=jd-content > <h2 id=judoc_plotlyjs ><a href="/JuDocPlottest/pub/menu7.html#judoc_plotlyjs">Judoc × PlotlyJS</a></h2> <pre><code class="julia hljs"><span class=hljs-keyword >using</span> PlotlyJS, DelimitedFiles, Statistics, ORCA
fp = joinpath(<span class=hljs-string >"assets"</span>, <span class=hljs-string >"temperature"</span>, <span class=hljs-string >"temps.tsv"</span>)
d, h = readdlm(abspath(fp), '\t', header = <span class=hljs-literal >true</span>)
sc = scatter(;x=d[:,<span class=hljs-number >1</span>], y=d[:,<span class=hljs-number >2</span>], mode=<span class=hljs-string >"markers"</span>)
p = plot(sc)
savefig(p, joinpath(<span class=hljs-meta >@__DIR__</span>, <span class=hljs-string >"plotly2.html"</span>), format=<span class=hljs-string >"html"</span>)
savefig(p, joinpath(<span class=hljs-meta >@__DIR__</span>, <span class=hljs-string >"plotly1.png"</span>), format=<span class=hljs-string >"png"</span>)
savefig(p, joinpath(<span class=hljs-meta >@__DIR__</span>, <span class=hljs-string >"output"</span>, <span class=hljs-string >"t2.out"</span>), format=<span class=hljs-string >"html"</span>)
println(<span class=hljs-string >"The average is:"</span>, mean(d[:,<span class=hljs-number >2</span>]))</code></pre> <p>png plot</p> <pre><code class="julia hljs">\figalt{new plot3}{./test/plotly1.png}</code></pre>
<img src="/JuDocPlottest/assets/pages/menu7/test/plotly1.png" alt="new plot3">
<p>html2:</p>
<a href="/JuDocPlottest/assets/pages/menu7/test/plotly1.html">plot2</a>
<pre><code class="plaintext hljs">There was an error running the code:
UndefVarError(:scatter)</code></pre>
<p>this does not work &#40;<a href="https://github.com/tlienart/JuDoc.jl/issues/322#issuecomment-568879579">issuecomment</a>&#41;:</p>
<pre><code class="html hljs">~~~\r\n{{insert ../assets/menu7/test/plotly1.html}}\r\n~~~</code></pre>



<h2 id=test_with_div ><a href="/JuDocPlottest/pub/menu7.html#test_with_div">Test with div</a></h2>
<p>See <a href="https://github.com/tlienart/JuDoc.jl/issues/325">issue325</a> for some html code block issues.</p>
<p>This should work from <a href="https://github.com/tlienart/JuDoc.jl/issues/322#issuecomment-568882518">here</a> and the example generation from PlotlyJS.jl&#39;s docs:</p>
<pre><code class="julia hljs"><span class=hljs-keyword >using</span> PlotlyJS
trace1 = scatter(;x=<span class=hljs-number >1</span>:<span class=hljs-number >4</span>, y=[<span class=hljs-number >10</span>, <span class=hljs-number >15</span>, <span class=hljs-number >13</span>, <span class=hljs-number >17</span>], mode=<span class=hljs-string >"markers"</span>)
trace2 = scatter(;x=<span class=hljs-number >2</span>:<span class=hljs-number >5</span>, y=[<span class=hljs-number >16</span>, <span class=hljs-number >5</span>, <span class=hljs-number >11</span>, <span class=hljs-number >9</span>], mode=<span class=hljs-string >"lines"</span>)
trace3 = scatter(;x=<span class=hljs-number >1</span>:<span class=hljs-number >4</span>, y=[<span class=hljs-number >12</span>, <span class=hljs-number >9</span>, <span class=hljs-number >15</span>, <span class=hljs-number >12</span>], mode=<span class=hljs-string >"lines+markers"</span>)
p = plot([trace1, trace2])
<span class=hljs-comment >#p = plot([trace1, trace2, trace3])</span>
<span class=hljs-comment >#relayout!(p, margin=attr(t=60, b=60, l=50, r=50))</span>
println(<span class=hljs-string >"""~~~
  &lt;div id=test2 style=width:600px;height:250px;&gt;&lt;/div&gt;"""</span>)
println(PlotlyJS.html_body(p.plot))
println(<span class=hljs-string >"~~~"</span>)</code></pre>
There was an error running the code: UndefVarError&#40;:scatter&#41;
<h2 id=raw_source ><a href="/JuDocPlottest/pub/menu7.html#raw_source">Raw source</a></h2>

<div id=ee9d7c9d-6faf-488b-aaf9-3ee496ce5954  class=plotly-graph-div ></div>

<script>
    window.PLOTLYENV=window.PLOTLYENV || {};
    window.PLOTLYENV.BASE_URL="https://plot.ly";
    Plotly.newPlot('ee9d7c9d-6faf-488b-aaf9-3ee496ce5954', [{"mode":"markers","y":[10,15,13,17],"type":"scatter","x":[1,2,3,4]},{"mode":"lines","y":[16,5,11,9],"type":"scatter","x":[2,3,4,5]},{"mode":"lines+markers","y":[12,9,15,12],"type":"scatter","x":[1,2,3,4]}],
               {"margin":{"l":50,"b":60,"r":50,"t":60}}, {showLink: false});

 </script>
 
<h2 id=judoc_web ><a href="/JuDocPlottest/pub/menu7.html#judoc_web">JuDoc web</a></h2>



<div id=jdpodu  style="width:600px;height:350px;"></div>
<script>
    var fig = JSON.parse('{"layout":{"margin":{"l":50,"b":50,"r":50,"t":60},"title":"Basic Contour Plot"},"data":[{"type":"contour","z":[[10.0,5.625,2.5,0.625,0.0],[10.625,6.25,3.125,1.25,0.625],[12.5,8.125,5.0,3.125,2.5],[15.625,11.25,8.125,6.25,5.625],[20.0,15.625,12.5,10.625,10.0]]}]}');
    CONTAINER = document.getElementById('jdpodu');
    Plotly.plot(CONTAINER, fig.data, fig.layout);
</script>

<h2 id=another_try ><a href="/JuDocPlottest/pub/menu7.html#another_try">Another try</a></h2>
<pre><code class="julia hljs"><span class=hljs-keyword >using</span> PlotlyJS

x = y = [-<span class=hljs-number >2</span>*<span class=hljs-literal >pi</span> + <span class=hljs-number >4</span>*<span class=hljs-literal >pi</span>*i/<span class=hljs-number >100</span> <span class=hljs-keyword >for</span> i <span class=hljs-keyword >in</span> <span class=hljs-number >1</span>:<span class=hljs-number >100</span>]
z = [sin(x[i]) * cos(y[j]) * sin(x[i]*x[i]+y[j]*y[j])/log(x[i]*x[i]+y[j]*y[j]+<span class=hljs-number >1</span>)
     <span class=hljs-keyword >for</span> i <span class=hljs-keyword >in</span> <span class=hljs-number >1</span>:<span class=hljs-number >100</span> <span class=hljs-keyword >for</span> j <span class=hljs-keyword >in</span> <span class=hljs-number >1</span>:<span class=hljs-number >100</span>]
z_ = [z[i:i+<span class=hljs-number >99</span>] <span class=hljs-keyword >for</span> i <span class=hljs-keyword >in</span> <span class=hljs-number >1</span>:<span class=hljs-number >100</span>:<span class=hljs-number >10000</span>]

data = PlotlyJS.contour(;z=z_, x=x, y=y)

plt = PlotlyJS.plot(data)
att = attr(;t=<span class=hljs-number >60</span>, b=<span class=hljs-number >60</span>, l=<span class=hljs-number >50</span>, r=<span class=hljs-number >50</span>)
<span class=hljs-comment >#relayout!(plt, margin=attr(t=60, b=60, l=50, r=50))</span>
html_block = PlotlyJS.html_body(plt.plot);
println(<span class=hljs-string >"\n\n\n~~~"</span>)
println(<span class=hljs-string >"<span class=hljs-variable >$html_block</span>"</span>)
println(<span class=hljs-string >"~~~\n\n\n"</span>)</code></pre>
There was an error running the code: ErrorException&#40;&quot;function attr does not accept keyword arguments&quot;&#41;
<div class=page-foot >
  <div class=copyright >
    &copy; Tamás Cserteg. Last modified: January 02, 2020. Website built with <a href="https://github.com/tlienart/JuDoc.jl">JuDoc.jl</a>.
  </div>
</div>

</div>